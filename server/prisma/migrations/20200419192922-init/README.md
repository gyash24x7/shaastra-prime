# Migration `20200419192922-init`

This migration has been generated by Yash Gupta at 4/19/2020, 7:29:23 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "departmentId" integer  NOT NULL ;

ALTER TABLE "public"."User" ADD FOREIGN KEY ("departmentId")REFERENCES "public"."Department"("id") ON DELETE CASCADE  ON UPDATE CASCADE

DROP TABLE "public"."_DepartmentMembers";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200416115632-init..20200419192922-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,29 +17,30 @@
   updates        Update[] @relation("DeptUpdates")
 }
 model User {
-  id              Int          @default(autoincrement()) @id
+  id              Int        @default(autoincrement()) @id
   name            String
-  email           String       @unique
+  email           String     @unique
   password        String
-  rollNumber      String       @unique
+  rollNumber      String     @unique
   profilePic      String
   coverPic        String
   mobile          String
   upi             String
   about           String
-  role            UserRole     @default(COORD)
-  verified        Boolean      @default(false)
+  role            UserRole   @default(COORD)
+  verified        Boolean    @default(false)
   verificationOTP String
   passwordOTP     String?
-  departments     Department[] @relation("DepartmentMembers", references: [id])
-  channels        Channel[]    @relation("ChannelMembers", references: [id])
-  channelsCreated Channel[]    @relation("ChannelsByUser")
-  messages        Message[]    @relation("MessagesByUser")
-  media           Media[]      @relation("MediaByUser")
-  tasksCreated    Task[]       @relation("TasksByUser")
-  tasksAssigned   Task[]       @relation("TasksForUser", references: [id])
+  department      Department @relation("DepartmentMembers", fields: [departmentId], references: [id])
+  departmentId    Int
+  channels        Channel[]  @relation("ChannelMembers", references: [id])
+  channelsCreated Channel[]  @relation("ChannelsByUser")
+  messages        Message[]  @relation("MessagesByUser")
+  media           Media[]    @relation("MediaByUser")
+  tasksCreated    Task[]     @relation("TasksByUser")
+  tasksAssigned   Task[]     @relation("TasksForUser", references: [id])
 }
 model Channel {
   id          Int       @default(autoincrement()) @id
```


